{"posts":[{"title":"前端合并单元格","content":"&lt;!DOCTYPE html&gt; &lt;html lang=&quot;en&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot; /&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot; /&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;https://unpkg.com/element-ui/lib/theme-chalk/index.css&quot; /&gt; &lt;title&gt;el-table行合并&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;div id=&quot;app&quot;&gt; &lt;el-table :span-method=&quot;arraySpanMethod&quot; :data=&quot;tableData&quot; border style=&quot;width: 1000px&quot;&gt; &lt;el-table-column prop=&quot;id&quot; label=&quot;id&quot; width=&quot;180&quot;&gt; &lt;/el-table-column&gt; &lt;el-table-column prop=&quot;date&quot; label=&quot;日期&quot; width=&quot;180&quot;&gt; &lt;/el-table-column&gt; &lt;el-table-column prop=&quot;name&quot; label=&quot;姓名&quot; width=&quot;180&quot;&gt; &lt;/el-table-column&gt; &lt;el-table-column prop=&quot;address&quot; label=&quot;地址&quot;&gt; &lt;/el-table-column&gt; &lt;/el-table&gt; &lt;/div&gt; &lt;!-- 引入vue --&gt; &lt;script src=&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;&gt;&lt;/script&gt; &lt;!-- 引入样式 --&gt; &lt;script src=&quot;https://unpkg.com/axios/dist/axios.min.js&quot;&gt;&lt;/script&gt; &lt;!-- 引入组件库 --&gt; &lt;script src=&quot;https://unpkg.com/element-ui/lib/index.js&quot;&gt;&lt;/script&gt; &lt;script&gt; var app = new Vue({ el: '#app', data: { tableData: [ { id: 1, date: '2016-05-02', name: '王小龙', address: '上海市普陀区金沙江路 1 弄' }, { id: 2, date: '2016-05-02', name: '王小龙', address: '上海市普陀区金沙江路 2 弄' }, { id: 3, date: '2016-05-02', name: '王小虎', address: '上海市普陀区金沙江路 3 弄' }, { id: 4, date: '2016-05-02', name: '王小虎', address: '上海市普陀区金沙江路 5 弄' }, { id: 5, date: '2016-05-02', name: '王小虎', address: '上海市普陀区金沙江路 5 弄' }, { id: 6, date: '2016-05-02', name: '王小虎', address: '上海市普陀区金沙江路 4 弄' }, ], mergeObj: {}, mergeArr: ['date', 'name', 'address'], }, mounted() { this.rowspan() }, methods: { rowspan() { for (let key of this.mergeArr) { let count = 0 this.mergeObj[key] = [] this.tableData.forEach((item, index) =&gt; { if (index === 0) { this.mergeObj[key].push(1) } else { if (item[key] === this.tableData[index - 1][key]) { this.mergeObj[key][count] += 1 this.mergeObj[key].push(0) } else { count = index this.mergeObj[key].push(1) } } }) } }, arraySpanMethod({ row, column, rowIndex, columnIndex }) { if (this.mergeArr.indexOf(column.property) !== -1) { if (this.mergeObj[column.property][rowIndex]) { return { rowspan: this.mergeObj[column.property][rowIndex], colspan: 1, } } else { return { rowspan: 0, colspan: 0, } } } else { return { rowspan: 1, colspan: 1, } } }, }, }) &lt;/script&gt; &lt;/body&gt; &lt;/html&gt; ","link":"https://wuaisong.github.io/post/qian-duan-he-bing-dan-yuan-ge/"},{"title":"动态列代码","content":"&lt;!DOCTYPE html&gt; &lt;html&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;!-- import CSS --&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;https://unpkg.com/element-ui/lib/theme-chalk/index.css&quot;&gt; &lt;/head&gt; &lt;body&gt; &lt;div id=&quot;app&quot;&gt; &lt;button @click=&quot;add&quot;&gt;转换数据&lt;/button&gt; &lt;el-table :data=&quot;dataList&quot;&gt; &lt;el-table-column :label=&quot;item.propName&quot; :property=&quot;item.propItem&quot; v-for=&quot;item in tableColumnList&quot; :key=&quot;item.prop&quot; align=&quot;center&quot;&gt; &lt;template v-slot=&quot;scope&quot;&gt;&lt;span&gt;{{ scope.row[scope.column.property] }}&lt;/span&gt;&lt;/template&gt; &lt;/el-table-column&gt; &lt;/el-table&gt; &lt;/div&gt; &lt;/body&gt; &lt;!-- import Vue before Element --&gt; &lt;script src=&quot;https://unpkg.com/vue@2/dist/vue.js&quot;&gt;&lt;/script&gt; &lt;!-- import JavaScript --&gt; &lt;script src=&quot;https://unpkg.com/element-ui/lib/index.js&quot;&gt;&lt;/script&gt; &lt;script&gt; new Vue({ el: '#app', data: function () { return { tableColumnList: [], dataList: [], titles: [ '日期', '类型', '用户数', '累计活跃用户', '累计活跃率', '数据日期', '数据更新时间'], datas: [ { '日期': '20220213', '类型': '内部用户', '用户数': '885577', '累计活跃用户': '312776', '累计活跃率': '3.12776885577E11', '数据日期': 1646064000000, '数据更新时间': 1646355601797 }, { '日期': '20220220', '类型': '内部用户', '用户数': '856552', '累计活跃用户': '311031', '累计活跃率': '3.11031856552E11', '数据日期': 1646064000000, '数据更新时间': 1646355601836 },] } }, methods: { add() { this.tableColumnList = this.titles.map((item, index) =&gt; { let a = {} a['propName'] = item a['propItem'] = 'propId' + index return a }) this.dataList = this.datas.map((mas) =&gt; { let b = {} Object.keys(mas).forEach((value, index) =&gt; { b['propId' + index] = mas[value] }) return b }) } } }) &lt;/script&gt; &lt;/html&gt; ","link":"https://wuaisong.github.io/post/dong-tai-lie-dai-ma/"},{"title":"前端常用代码段","content":"行内编辑 &lt;!DOCTYPE html&gt; &lt;html&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;Document&lt;/title&gt; &lt;script src=&quot;https://cdn.staticfile.org/vue/2.7.2/vue.min.js&quot;&gt;&lt;/script&gt; &lt;!-- 引入样式 --&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;https://unpkg.com/element-ui/lib/theme-chalk/index.css&quot;&gt; &lt;!-- 引入组件库 --&gt; &lt;script src=&quot;https://unpkg.com/element-ui/lib/index.js&quot;&gt;&lt;/script&gt; &lt;/head&gt; &lt;body&gt; &lt;div id=&quot;app&quot;&gt; &lt;el-form ref=&quot;tableFrom&quot; :model=&quot;tableFrom&quot; :rules=&quot;tableFromRules&quot;&gt; &lt;el-table :data=&quot;tableFrom.tableData&quot; style=&quot;width: 100%;&quot;&gt; &lt;el-table-column label=&quot;ID&quot; min-width=&quot;180&quot;&gt; &lt;template slot-scope=&quot;scope&quot;&gt; &lt;el-form-item :prop=&quot;'tableData.' + scope.$index + '.id'&quot; :rules=&quot;tableFromRules.id&quot;&gt; &lt;el-input v-model=&quot;scope.row.id&quot;&gt;&lt;/el-input&gt; &lt;/el-form-item&gt; &lt;/template&gt; &lt;/el-table-column&gt; &lt;el-table-column label=&quot;name&quot; min-width=&quot;180&quot;&gt; &lt;template slot-scope=&quot;scope&quot;&gt; &lt;el-form-item :prop=&quot;'tableData.' + scope.$index + '.name'&quot; :rules=&quot;tableFromRules.name&quot;&gt; &lt;el-input v-model=&quot;scope.row.name&quot;&gt;&lt;/el-input&gt; &lt;/el-form-item&gt; &lt;/template&gt; &lt;/el-table-column&gt; &lt;el-table-column label=&quot;操作&quot; min-width=&quot;80&quot;&gt; &lt;template slot-scope=&quot;scope&quot;&gt; &lt;el-button type=&quot;text&quot; @click=&quot;insert(scope.$index)&quot;&gt;插入当前行&lt;/el-button&gt; &lt;el-button type=&quot;text&quot; @click=&quot;del(scope.$index)&quot;&gt;删除&lt;/el-button&gt; &lt;/template&gt; &lt;/el-table-column&gt; &lt;/el-table&gt; &lt;el-button type=&quot;success&quot; icon=&quot;el-icon-plus&quot; plain style=&quot;margin-top: 10px; width: 100%;&quot; @click=&quot;add()&quot;&gt;添加 &lt;/el-button&gt; &lt;/el-form&gt; &lt;/div&gt; &lt;script&gt; var app = new Vue({ el: '#app', data: { tableFrom: { tableData: [] }, tableFromRules: { id: [{ required: true, message: '请输入id', trigger: 'blur' }], name: [{ required: true, message: '请输入name', trigger: 'blur' }] } }, mounted() {}, methods: { add() { this.tableFrom.tableData.push({ id: '', name: '' }) }, insert(index) { this.tableFrom.tableData.splice(index, 0, { id: '', name: '' }) }, del(index) { this.tableFrom.tableData.splice(index, 1) } } }) &lt;/script&gt; &lt;/body&gt; &lt;/html&gt; 防抖函数 // 防抖：延迟执行 // 场景示例：输入框输入后的联想或查找（输入过程中不触发，输入完成后才触发） function debounce(fn, delay) { let timer = null; return function() { // 如果当前有待执行任务，清除待执行任务 if (timer) { clearTimeout(timer); } // 延迟delay毫秒后执行任务 timer = setTimeout(() =&gt; { fn.apply(this, arguments); }, delay); } } // 防抖：支持立即执行 // 场景示例：提交按钮防止重复触发（点击立即提交，并防止短时间内误触） function debounce(fn, delay, immediate) { let timer = null; return function() { if (timer) { clearTimeout(timer); } // 如果需要立即执行 if (immediate) { // 每次触发都会更新timer， // 只有第一次触发，或者在延迟delay毫秒后timer被清除， // timer才为null， // 通过timer是否有值，来判断是否要执行 if (!timer) { fn.apply(this, arguments); } // 延迟delay毫秒后清除timer timer = setTimeout(() =&gt; { timer = null; }, delay); } else { timer = setTimeout(() =&gt; { fn.apply(this, arguments); }, delay); } } } 节流函数 // 节流 // 场景示例：滚动、鼠标跟随、元素拖动拉伸等高频触发场景 function throttle(fn, delay) { let timestamp = 0; return function() { let now = Date.now(); // 当前时间距离上次触发的时间戳大于delay毫秒时才执行任务 if (now - timestamp &gt; delay) { fn.apply(this, arguments); timestamp = now; } } } ","link":"https://wuaisong.github.io/post/qian-duan-chang-yong-dai-ma-duan/"},{"title":"Redis从入门到精通","content":" Redis从入门到精通 嘻嘻嘻 ","link":"https://wuaisong.github.io/post/redis-cong-ru-men-dao-jing-tong/"},{"title":"架构设计","content":" ","link":"https://wuaisong.github.io/post/xx/"},{"title":"数据库","content":"Oracle手动修改序列当前值 ALTER SEQUENCE SEQ_TEST INCREMENT BY 10000000; SELECT SEQ_TEST.NEXTVAL FROM DUAL; ALTER SEQUENCE SEQ_TEST INCREMENT BY 1; with使用： with t as (select 1 from dual) select * from t json处理： select json_unquote(t.value -&gt; '$.class') from (select '{&quot;class&quot;:&quot;xx&quot;}' as value from dual) t 两个表一起删除或更新： UPDATE t1 LEFT JOIN t2 ON t1.user_id = t2.id SET t1.telephoneNumber = t1.mobileNumber WHERE 1 =1 delete xji,xjg from xxl_job_info xji join xxl_job_group xjg on xji.job_group = xjg.id 5.7开窗函数： create table stucore ( id int not null primary key, stuno int null, name varchar(200) null, score int null, last_update datetime null ); INSERT INTO xxl_job.stucore (id, stuno, name, score, last_update) VALUES (1, 1, 'aa', 1, '2023-06-21 15:42:26'); INSERT INTO xxl_job.stucore (id, stuno, name, score, last_update) VALUES (2, 2, 'bb', 2, '2023-06-21 15:42:32'); INSERT INTO xxl_job.stucore (id, stuno, name, score, last_update) VALUES (3, 1, 'aa', 3, '2023-06-21 15:42:33'); INSERT INTO xxl_job.stucore (id, stuno, name, score, last_update) VALUES (4, 4, 'cc', 4, '2023-06-21 15:42:34'); select * from (select @rn := case when @st_uno = a.stuno then @rn + 1 -- 如果学号相等则rn+1 else 1 end as rn, @st_uno := a.stuno, -- 给变量赋值 a.stuno, a.name, a.score, a.last_update from (select * from stucore order by name, last_update desc) a, -- 这里需要根据分组字段和排序字段进行排序 (select @rn = 0, @st_uno = '') b -- 定义变量 ) a 锁相关： select ... for share 可多读，但是不可写 select ... for update 仅允许一个读 加解密 select AES_enCRYPT(32, 'key') select AES_DECRYPT(0x0B14CBDD46E404ECD80DA5DC83849B70, 'key') select hex('sam') select unhex('73616D') select hex('给我狗子'); select 0xE7BB99E68891E78B97E5AD90 窗口函数 SELECT * FROM (SELECT A.Name, B.*, row = ROW_NUMBER() OVER(PARTITION BY A.StuId ORDER BY B.SubmitTime DESC) FROM A JOIN B ON A.StuId = B.StuId) AS t WHERE t.row = 1 总览Mysql数据库数据量 use information_schema; select table_name, table_rows from tables where table_schema = '库名' ORDER BY table_rows desc; select count(table_name) from TABLES where TABLE_SCHEMA = 'gps'; select table_name from TABLES where TABLE_SCHEMA = 'gps'; select sum(table_rows) from tables where table_schema = 'gps'; select table_name, table_rows from tables where table_schema = 'gps' ORDER BY table_rows desc; 转老数据到新表 CREATE TABLE `app_user` ( `id` BIGINT(20) UNSIGNED NOT NULL AUTO_INCREMENT, `name` VARCHAR(50) DEFAULT '' COMMENT '用户昵称', `email` VARCHAR(50) NOT NULL COMMENT '用户邮箱', `phone` VARCHAR(20) DEFAULT '' COMMENT '手机号', `gender` TINYINT(4) UNSIGNED DEFAULT '0' COMMENT '性别（0：男;1:女）', `password` VARCHAR(100) NOT NULL COMMENT '密码', `age` TINYINT(4) DEFAULT '0' COMMENT '年龄', `create_time` DATETIME DEFAULT CURRENT_TIMESTAMP, `update_time` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, PRIMARY KEY (`id`) ) ENGINE = INNODB DEFAULT CHARSET = utf8 COMMENT = 'app用户表'; show variables like 'log_bin_trust_function_creators'; set global log_bin_trust_function_creators = 1; -- 写函数之前必须要写 DROP FUNCTION IF EXISTS mock_data; CREATE FUNCTION mock_data() RETURNs INT BEGIN DECLARE num INT DEFAULT 10; DECLARE i INT DEFAULT 0; WHILE i &lt; num DO insert INTO app_user(`name`, `email`, `phone`, `gender`, `password`, `age`) VALUES (CONCAT('用户', i), '123456789@qq.com', CONCAT('15', FLOOR(RAND() * (999999999 - 100000000) + 100000000)), FLOOR(RAND() * 2), UUID(), FLOOR(RAND() * 100)); SET i = i + 1; END WHILE; RETURN i; END; SELECT mock_data(); drop function mock_data; create table temp select * from app_user; select count(1) from temp; select count(1) from app_user; drop table temp; drop table app_user; Oracle处理日期 当前时间减去7分钟的时间 select sysdate,sysdate - interval '7' MINUTE from dual 当前时间减去7小时的时间 select sysdate - interval '7' hour from dual 当前时间减去7天的时间 select sysdate - interval ’7’ day from dual 当前时间减去7月的时间 select sysdate,sysdate - interval '7' month from dual 当前时间减去7年的时间 select sysdate,sysdate - interval '7' year from dual 时间间隔乘以一个数字 select sysdate,sysdate - 8*interval '7' hour from dual ","link":"https://wuaisong.github.io/post/shu-ju-ku/"},{"title":"Java","content":"Maven相关 jib-maven-plugin 负载均衡相关 Keepalived Nginx LVS Haproxy 工作中的一些处理方案 视频处理工具 excel处理工具 函数式扩展库 规则引擎 产线异常处理神器 分库分表方案 访问控制框架 常用正则表达式 参考文档 日期提取 public class Main { public static void main(String[] args) { String text = &quot;开奖日期：2021年3月28日 兑奖截止日期：2021年5月26日&quot;; Pattern p = Pattern.compile(&quot;(\\\\d{4})年(\\\\d{1,2})月(\\\\d{1,2})日&quot;); Matcher m = p.matcher(text); while (m.find()) { System.out.println(m.group(0)); } } } 常用正则 匹配小数点后三位：^(\\d+)?(?:\\.\\d{1,3})?$ 常用CRON表达式 （0）0/20 * * * * ? 表示每20秒 调整任务 （1）0 0 2 1 * ? 表示在每月的1日的凌晨2点调整任务 （2）0 15 10 ? * MON-FRI 表示周一到周五每天上午10:15执行作业 （3）0 15 10 ? 6L 2002-2006 表示2002-2006年的每个月的最后一个星期五上午10:15执行作 （4）0 0 10,14,16 * * ? 每天上午10点，下午2点，4点 （5）0 0/30 9-17 * * ? 朝九晚五工作时间内每半小时 （6）0 0 12 ? * WED 表示每个星期三中午12点 （7）0 0 12 * * ? 每天中午12点触发 （8）0 15 10 ? * * 每天上午10:15触发 （9）0 15 10 * * ? 每天上午10:15触发 （10）0 15 10 * * ? * 每天上午10:15触发 （11）0 15 10 * * ? 2005 2005年的每天上午10:15触发 （12）0 * 14 * * ? 在每天下午2点到下午2:59期间的每1分钟触发 （13）0 0/5 14 * * ? 在每天下午2点到下午2:55期间的每5分钟触发 （14）0 0/5 14,18 * * ? 在每天下午2点到2:55期间和下午6点到6:55期间的每5分钟触发 （15）0 0-5 14 * * ? 在每天下午2点到下午2:05期间的每1分钟触发 （16）0 10,44 14 ? 3 WED 每年三月的星期三的下午2:10和2:44触发 （17）0 15 10 ? * MON-FRI 周一至周五的上午10:15触发 （18）0 15 10 15 * ? 每月15日上午10:15触发 （19）0 15 10 L * ? 每月最后一日的上午10:15触发 （20）0 15 10 ? * 6L 每月的最后一个星期五上午10:15触发 （21）0 15 10 ? * 6L 2002-2005 2002年至2005年的每月的最后一个星期五上午10:15触发 （22）0 15 10 ? * 6#3 每月的第三个星期五上午10:15触发 （24）“30 * * * * ?” 每半分钟触发任务 （25）“30 10 * * * ?” 每小时的10分30秒触发任务 （23）“30 10 1 * * ?” 每天1点10分30秒触发任务 （26）“30 10 1 20 * ?” 每月20号1点10分30秒触发任务 （27）“30 10 1 20 10 ? *” 每年10月20号1点10分30秒触发任务 （28）“30 10 1 20 10 ? 2011” 2011年10月20号1点10分30秒触发任务 （29）“30 10 1 ? 10 * 2011” 2011年10月每天1点10分30秒触发任务 （30）“30 10 1 ? 10 SUN 2011” 2011年10月每周日1点10分30秒触发任务 正则替换js var regex = /\\[(.*?)\\]\\((.*?)\\)/g; var str = &quot;百度的超链接是：[百度](http://www.baidu.com)，这是markdown格式的文本。&quot;; var result = str.replace(regex, '&lt;a href=&quot;$2&quot;&gt;$1&lt;/a&gt;'); console.log(result); // 百度的超链接是：&lt;a href=&quot;http://www.baidu.com&quot;&gt;百度&lt;/a&gt;，这是markdown格式的文本。 var regex = /(\\d+)-(\\d+)-(\\d+)/g; var str = &quot;123-456-789&quot;; var result = str.replace(regex, &quot;$3-$1-$2&quot;); console.log(result); // 789-123-456 正则替换java public class Main { public static void main1(String[] args) { String regex = &quot;(\\\\d+)-(\\\\d+)-(\\\\d+)&quot;; String str = &quot;123-456-789&quot;; Matcher matcher = Pattern.compile(regex).matcher(str); String replaceResult = matcher.replaceAll(&quot;$3-$1-$2&quot;); // 789-123-456 System.out.println(replaceResult); } public static void main(String[] args) { String regex = &quot;\\\\[(.*?)\\\\]\\\\((.*?)\\\\)&quot;; String str = &quot;百度的超链接是：[百度](http://www.baidu.com)，这是markdown格式的文本。&quot;; Matcher matcher = Pattern.compile(regex).matcher(str); // 替换的匹配到的文本 String replaceResult = matcher.replaceAll(&quot;&lt;a href=\\&quot;$2\\&quot;&gt;$1&lt;/a&gt;&quot;); // 百度的超链接是：&lt;a href=&quot;http://www.baidu.com&quot;&gt;百度&lt;/a&gt;，这是markdown格式的文本。 System.out.println(replaceResult); } // 百度的超链接是：&lt;a href=&quot;http://www.baidu.com&quot;&gt;百度&lt;/a&gt;，这是markdown格式的文本。 } 替换空行 ^[ \\t]*\\n 回滚代码到某个提交 鼠标选中将要回退到的那个历史提交记录,强制重置 选择最新的提交记录，软重置 提交本地代码，成功重置 ","link":"https://wuaisong.github.io/post/java/"},{"title":"微服务","content":"K8S搭建 使用kuboard-spray搭建K8S 创建BusyBox的yaml文件 apiVersion: apps/v1beta1 kind: Deployment metadata: name: app spec: replicas: 10 template: metadata: labels: run: app spec: containers: - name: app image: busybox #内置的linux大多数命令，多用于测试 args: - /bin/sh - -c - sleep 10; touch /tmp/healthy; sleep 30000 readinessProbe: #就绪探针 exec: command: - cat - /tmp/healthy initialDelaySeconds: 10 #10s之后开始第一次探测 periodSeconds: 5 #第一次探测之后每隔5s探测一次 ","link":"https://wuaisong.github.io/post/wei-fu-wu/"},{"title":"Docker","content":"参考文档 安装脚本 vi /etc/sysconfig/network-scripts/ifcfg-ens33 service network restart 脚本： #!/bin/bash echo &quot;start&quot; cat &gt; /etc/sysconfig/network-scripts/ifcfg-ens33 &lt;&lt; EOF TYPE=Ethernet BOOTPROTO=static UUID=d1d808b9-3134-4c39-aac0-803c40977b41 DEVICE=ens33 ONBOOT=yes IPADDR=192.168.8.143 NETMASK=255.255.255.0 GATEWAY=192.168.8.2 EOF sed -i '28 i dns=none' /etc/NetworkManager/NetworkManager.conf systemctl restart NetworkManager.service cat &gt; /etc/resolv.conf &lt;&lt; EOF nameserver 114.114.114.114 nameserver 8.8.8.8 EOF yum install -y traceroute yum install -y yum-utils yum-config-manager --add-repo https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo yum list docker-ce --showduplicates | sort -r yum install -y docker-ce docker-ce-cli containerd.io #yum install docker-ce-&lt;VERSION_STRING&gt; docker-ce-cli-&lt;VERSION_STRING&gt; containerd.io mkdir -p /etc/docker tee /etc/docker/daemon.json &lt;&lt; EOF { &quot;registry-mirrors&quot;: [&quot;https://pgjhp4wg.mirror.aliyuncs.com&quot;] } EOF systemctl start docker systemctl enable docker systemctl daemon-reload systemctl restart docker sudo curl -L https://github.com/docker/compose/releases/download/1.16.1/docker-compose-`uname -s`-`uname -m` -o /usr/local/bin/docker-compose sudo chmod +x /usr/local/bin/docker-compose docker-compose --version 运行前： chmod 777 docker.sh 常见Docker命令 监控命令 systemctl status docker docker stats docker info docker images docker search 镜像名称 docker pull 镜像名称 docker rmi 镜像ID docker ps docker ps -a docker ps -f status=exited docker ps --help 去除镜像 docker stop $(docker ps -a -q) docker rm $(docker ps -a -q) docker rmi $(docker images -q) 网络相关 docker network ls docker network inspect mynet docker network create -d bridge mynet docker network create --driver bridge --subnet 192.168.0.0/16 --gateway 192.168.0.1 mynet docker run -d -P --name tomcat-net-01 --net mynet tomcat docker network connect mynet tomcat01 docker exec -it tomcat-net-01 ping tomcat-net-02 docker run -d -P --name tomcat03 --link tomcat01:t1 tomcat apt-get update apt install iputils-ping apt install net-tools 容器自启 docker update --restart=always 容器名或容器ID docker container update --restart=【容器策略】 容器名称 # no 容器退出时不重启容器 # on-failure 只有在非零状态退出时才重新启动容器 --restart=on-failure:【重启次数】 # always 无论退出状态如何都 复制容器内文件 docker cp nacos:/home/nacos/conf/application.properties ./application.properties 转移镜像命令 docker save -o ./alpine-ffmpeg-3.15.tar alpine-ffmpeg:3.15 docker load -i alpine-ffmpeg-3.15.tar 常见Docker环境 创建MQTT docker run -d --name=mosquitto --privileged -p 1883:1883 -p 9001:9001 eclipse-mosquitto:1.6.14 创建Nacos docker run -d --restart=unless-stopped --name nacos -p 8848:8848 -p 9848:9848 -e PREFER_HOST_MODE=127.0.0.1 -e MODE=standalone nacos/nacos-server:2.0.2 创建Nacos指定mysql docker run -d --restart=unless-stopped --name nacos -p 8848:8848 -p 9848:9848 -e MYSQL_SERVICE_DB_NAME=nacos -e PREFER_HOST_MODE=127.0.0.1 -e MYSQL_SERVICE_PASSWORD=root -e MYSQL_SERVICE_USER=root -e MYSQL_SERVICE_HOST=172.17.0.4 -e SPRING_DATASOURCE_PLATFORM=mysql -e MODE=standalone nacos/nacos-server:2.0.2 创建redis docker run --restart unless-stopped -d --name redis -p 6379:6379 redis 创建zookeeper docker run --restart unless-stopped --name zookeeper -p 2181:2181 -d zookeeper:latest 创建rabbitmq docker run -d --name myrabbitmq -p 5672:5672 -p 15672:15672 rabbitmq:3.7-management 创建mysql8 docker run --restart unless-stopped -d --name mysql8 -p 3306:3306 -e MYSQL_ROOT_PASSWORD=root -e TZ=Asia/Shanghai mysql:8 --character-set-server=utf8mb4 --collation-server=utf8mb4_unicode_ci --default-authentication-plugin=mysql_native_password --lower_case_table_names=1 --sql_mode=STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION ","link":"https://wuaisong.github.io/post/docker-run/"},{"title":"Linux","content":"查看进程连接的带宽情况 yum -y install nethogs nethogs -d 5 #5秒钟刷新一次 nethogs -d 3 -c 2 #监控时刷新频率3秒总计2次 nethogs -v 3 #按照MB流量格式显示模式显示 nethogs -a #使用-a参数可以监控环回口流量 nethogs -t -d 10 -c 5 #-t表示启用追踪模式，可以记录每一次的值，也可以结合其他参数一起使用 Linux服务器时间同步 yum install -y ntpdate ntpdate ntp3.aliyun.com 时间同步器 yum install -y ntpdate &amp;&amp; ntpdate time.windows.com cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime docker run -d -p 4242:4242 -v /etc/localtime:/etc/localtime --name opentsdb petergrace/opentsdb-docker 实时查看日志文件 tail -f 文件 | grep --line-buffered 搜索内容 tail -f -n 100 查看逻辑CPU核心数 grep 'model name' /proc/cpuinfo | wc -l htop及iotop命令 uptime w top yum -y install epel-release yum -y install htop yum install -y iotop yum -y install dstat 压测 yum install -y epel-release.noarch &amp;&amp; yum -y update yum install -y stress stress-ng yum -y install stress 对CPU进行压力测试：sudo stress -c 8 -t 10 对内存进行压力测试：stress --vm 3 --vm-bytes 1G --vm-keep -t 10 运行8 cpu, 4 fork, 5 hdd, 4 io, 50 vm, 10小时：stress-ng --cpu 8 --cpu-method all --io 4 --vm 50 -d 5 --fork 4 --timeout 36000s 压满6个cpu，执行100秒（--timeout可以直接用--t）：stress-ng --cpu 6 --timeout 100 新增4个内存分配进程，每次分配大小730M，分配后不释放，长期保持测试 / 测试60秒：stress-ng --vm 4 --vm-bytes 730M --vm-keep 新增6个I/O进程，测试100秒：stress-ng --io 6 -t 100 新增6个I/O进程，1个写进程，每次写1000M文件块，测试100秒：stress-ng --io 6 -d 1 --hdd-bytes 1000M -t 100 #复制文件 scp -r root@10.42.221.95:/home/gps/test /home/gps/ scp -r root@10.42.221.95:/home/gps/test/server /home/gps/test/ nohup java -jar -Dserver.port=9087 gps-api.war --spring.profiles.active=test &amp; echo $! &gt;main.pid Luxsan@admin202z 查看证书有效期 openssl x509 -in luxsan-ict.com.pem -noout -dates 下载文件 curl http://mirrors.163.com/centos/8.1.1911/isos/x86_64/CentOS-8.1.1911-x86_64-dvd1.iso vi常用命令 /str 从光标位置开始往文件末尾查找str，按n查找下一个，按N返回上一个 ?str 从光标位置开始往文件开头查找str，按n查找下一个，按N返回上一个 查看系统剩余物理内存 free -g free -s 3 df -h ls -lh find ./ -type f -size +500M find /home -name myfile.txt find /home -name &quot;myfi*.txt&quot; find / -type d find / -mtime -7 -type f find /home -type f -name &quot;test*&quot; 查看端口情况 while true; do &lt;cmd&gt;; sleep 1; done lsof -i:8488 netstat -apn | grep 26068 所有udp端口号 netstat -nupl 所有tcp端口号 netstat -ntpl #查看网络情况 ps -ef | grep java traceroute ip telnet ip port 扫描开放端口 nmap -p- 10.191.10.23 ","link":"https://wuaisong.github.io/post/linux_status/"}]}